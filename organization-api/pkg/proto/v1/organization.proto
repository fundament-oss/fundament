edition = "2023";

package organization.v1;

import "buf/validate/validate.proto";
import "google/protobuf/go_features.proto";
import "google/protobuf/timestamp.proto";

option features.(pb.go).api_level = API_OPAQUE;
option features.field_presence = IMPLICIT;
option go_package = "github.com/fundament-oss/fundament/organization-api/pkg/proto/gen/v1;organizationv1";

// OrganizationService manages organizations
service OrganizationService {
  // ListOrganizations lists all organizations the current user belongs to
  rpc ListOrganizations(ListOrganizationsRequest) returns (ListOrganizationsResponse);

  // GetOrganization retrieves the user's organization by ID
  rpc GetOrganization(GetOrganizationRequest) returns (GetOrganizationResponse);

  // UpdateOrganization updates the user's organization
  rpc UpdateOrganization(UpdateOrganizationRequest) returns (UpdateOrganizationResponse);
}

// Organization information
message Organization {
  // Organization ID (UUID)
  string id = 10;
  // Organization name (immutable, machine-readable identifier)
  string name = 20;
  // Organization display name (human-readable label)
  string display_name = 30;
  // Creation timestamp (RFC3339)
  google.protobuf.Timestamp created = 40;
}

// GetOrganization request
message GetOrganizationRequest {
  // ID of the organization to retrieve
  string id = 10 [(buf.validate.field).string = {uuid: true}];
}

// GetOrganization response
message GetOrganizationResponse {
  // The requested organization
  Organization organization = 10;
}

// UpdateOrganization request
message UpdateOrganizationRequest {
  // ID of the organization to update
  string id = 10 [(buf.validate.field).string = {uuid: true}];
  // New display name for the organization
  string display_name = 20 [(buf.validate.field).string = {
    min_len: 1
    max_len: 255
  }];
}

// UpdateOrganization response
message UpdateOrganizationResponse {}

// ListOrganizations request
message ListOrganizationsRequest {}

// ListOrganizations response
message ListOrganizationsResponse {
  // List of organizations the user belongs to
  repeated Organization organizations = 10;
}
