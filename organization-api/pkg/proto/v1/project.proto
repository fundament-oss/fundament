syntax = "proto3";

package organization.v1;

import "v1/common.proto";
import "google/protobuf/empty.proto";

option go_package = "github.com/fundament-oss/fundament/organization-api/pkg/proto/gen/v1;organizationv1";

// ProjectService manages projects within an organization
service ProjectService {
  // List all projects for the current organization
  rpc ListProjects(ListProjectsRequest) returns (ListProjectsResponse);

  // Get detailed information about a specific project
  rpc GetProject(GetProjectRequest) returns (GetProjectResponse);

  // Create a new project
  rpc CreateProject(CreateProjectRequest) returns (CreateProjectResponse);

  // Update project configuration
  rpc UpdateProject(UpdateProjectRequest) returns (google.protobuf.Empty);

  // Delete a project
  rpc DeleteProject(DeleteProjectRequest) returns (google.protobuf.Empty);

  // List all members of a project
  rpc ListProjectMembers(ListProjectMembersRequest) returns (ListProjectMembersResponse);

  // Add a member to a project (requires admin role)
  rpc AddProjectMember(AddProjectMemberRequest) returns (AddProjectMemberResponse);

  // Update a member's role (requires admin role)
  rpc UpdateProjectMemberRole(UpdateProjectMemberRoleRequest) returns (google.protobuf.Empty);

  // Remove a member from a project (requires admin role)
  rpc RemoveProjectMember(RemoveProjectMemberRequest) returns (google.protobuf.Empty);
}

// List projects request
message ListProjectsRequest {}

// List projects response
message ListProjectsResponse {
  repeated Project projects = 10;
}

// Get project request
message GetProjectRequest {
  string project_id = 10;
}

// Get project response
message GetProjectResponse {
  Project project = 10;
}

// Project information
message Project {
  string id = 10;
  string name = 20;
  Timestamp created_at = 30;
}

// Create project request
message CreateProjectRequest {
  string name = 10;
}

// Create project response
message CreateProjectResponse {
  string project_id = 10;
}

// Update project request
message UpdateProjectRequest {
  string project_id = 10;
  optional string name = 20;
}

// Delete project request
message DeleteProjectRequest {
  string project_id = 10;
}

// Project member role
enum ProjectMemberRole {
  PROJECT_MEMBER_ROLE_UNSPECIFIED = 0;
  PROJECT_MEMBER_ROLE_ADMIN = 1;
  PROJECT_MEMBER_ROLE_MEMBER = 2;
}

// Project member information
message ProjectMember {
  string id = 10;
  string project_id = 20;
  string user_id = 30;
  string user_name = 40;
  ProjectMemberRole role = 50;
  Timestamp created_at = 60;
}

// List project members request
message ListProjectMembersRequest {
  string project_id = 10;
}

// List project members response
message ListProjectMembersResponse {
  repeated ProjectMember members = 10;
}

// Add project member request
message AddProjectMemberRequest {
  string project_id = 10;
  string user_id = 20;
  ProjectMemberRole role = 30;
}

// Add project member response
message AddProjectMemberResponse {
  string member_id = 10;
}

// Update project member role request
message UpdateProjectMemberRoleRequest {
  string member_id = 10;
  ProjectMemberRole role = 20;
}

// Remove project member request
message RemoveProjectMemberRequest {
  string member_id = 10;
}
