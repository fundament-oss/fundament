# Fundament Helm Chart - Default Values

# JWT Secret - required for token signing/validation across services
jwtSecret: ""
jwtSecretRef:
  name: "" # Name of the Kubernetes Secret
  key: "" # Key within the Secret containing the JWT secret

# External URLs - must be set for your environment
externalUrls:
  authn: "" # e.g., https://authn.example.com
  organization: "" # e.g., https://organization.example.com
  console: "" # e.g., https://app.example.com
  docs: "" # e.g., https://docs.example.com
  cookieDomain: "" # e.g., example.com

# Container images
images:
  dbMigrations: db-migrations:latest
  authnApi: authn-api:latest
  organizationApi: organization-api:latest
  consoleFrontend: console-frontend:latest
  docsFrontend: docs-frontend:latest
  clusterWorker: cluster-worker:latest
  authzWorker: authz-worker:latest
  openfgaSetup: openfga-setup:latest

# Database (CloudNativePG)
db:
  enabled: true
  instances: 1
  storageSize: 1Gi
  reset: false
  insertTestData: false
  exposePort: 0 # Expose postgres on this port via LoadBalancer (0 = disabled)

# Authentication API
authnApi:
  enabled: true
  replicas: 1
  logLevel: info

# Organization API
organizationApi:
  enabled: false
  replicas: 1
  logLevel: info

# Cluster Worker
clusterWorker:
  enabled: false
  replicas: 1
  logLevel: info
  gardenerMode: mock # mock or real
  gardenerKubeconfigSecret: "" # Secret name containing kubeconfig for real mode

# Console Frontend
consoleFrontend:
  enabled: false
  replicas: 1

# Docs frontend
docsFrontend:
  enabled: false
  replicas: 1

# Authz Worker (outbox pattern for OpenFGA tuple sync)
authzWorker:
  enabled: false
  replicas: 1
  logLevel: info
  pollInterval: "5s"
  batchSize: 100
  maxRetries: 3

# OpenFGA (Fine-Grained Authorization)
openfga:
  enabled: false
  image: openfga/openfga:v1.11.3
  replicas: 1
  playground:
    enabled: false

# Dex (OIDC Identity Provider)
dex:
  enabled: true
  issuer: ""
  discoveryUrl: "" # Internal URL for OIDC discovery (defaults to issuer if empty)
  staticClients: []
  staticPasswords: []

# Host aliases for pods (useful for local development to resolve external URLs to internal services)
hostAliases: []

# Ingress
ingress:
  enabled: false
  className: nginx
  domain: ""
