<app-card>
  <div header>
    <h1 class="text-2xl font-bold dark:text-white">Dashboard</h1>
  </div>

  <div content>
    <!-- Error Message -->
    @if (errorMessage()) {
      <app-alert variant="danger" class="mb-6">
        <app-error-icon slot="icon" class="h-5 w-5" />
        {{ errorMessage() }}
      </app-alert>
    }

    <!-- Create Cluster Button -->
    <div class="mb-6">
      <app-button variant="primary" routerLink="/add-cluster">
        <app-plus-icon class="mr-1.5 h-4 w-4" />
        Add a Kubernetes cluster
      </app-button>
    </div>

    <!-- Clusters Grid -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      @for (cluster of clusters(); track cluster.id) {
        <app-card>
          <div header>
            <div class="flex items-center justify-between">
              <h2 class="text-xl font-bold dark:text-white">{{ cluster.name }}</h2>
              <app-badge [class]="getStatusColor(cluster.status)">
                {{ cluster.status || 'Unknown status' }}
              </app-badge>
            </div>
          </div>

          <div content>
            <dl>
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Region</dt>
              <dd class="mt-0.5 mb-4 text-sm dark:text-white">
                {{ cluster.region.toUpperCase() }}
              </dd>
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">
                Number of node pools
              </dt>
              <dd class="mt-0.5 mb-4 text-sm dark:text-white">
                {{ getNodePoolCount(cluster.id) }}
              </dd>
            </dl>

            <!-- Card Actions -->
            <div class="mt-6">
              <app-button variant="primary" [routerLink]="'/clusters/' + cluster.id">
                <app-eye-icon class="mr-2 h-4 w-4" /> View details
              </app-button>
            </div>
          </div>
        </app-card>
      }
    </div>
  </div>
</app-card>
