<app-progress-stepper [steps]="steps" [currentStepIndex]="currentStepIndex"></app-progress-stepper>

<div class="rounded-md border border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-950">
  <!-- Header -->
  <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
    <h1 class="text-2xl font-bold dark:text-white">Cluster summary</h1>
    <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">
      Review your cluster configuration before creating it.
    </p>
  </div>

  <!-- Summary Content -->
  <div class="space-y-6 px-6 py-6">
    <!-- Basics Block -->
    <div class="rounded-md border border-gray-200 p-4 dark:border-gray-800">
      <h3 class="mb-4 text-lg font-medium dark:text-white">Basics</h3>
      <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
        <dl>
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Cluster name</dt>
          <dd class="mt-1 text-sm dark:text-white">{{ clusterSummary.basics.name }}</dd>
        </dl>
        <dl>
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Region</dt>
          <dd class="mt-1 text-sm dark:text-white">{{ clusterSummary.basics.region }}</dd>
        </dl>
        <dl>
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Kubernetes version</dt>
          <dd class="mt-1 text-sm dark:text-white">
            {{ clusterSummary.basics.kubernetesVersion }}
          </dd>
        </dl>
      </div>
    </div>

    <!-- Node Pools Block -->
    <div class="rounded-md border border-gray-200 p-4 dark:border-gray-800">
      <h3 class="mb-4 text-lg font-medium dark:text-white">Node pools</h3>
      <div class="space-y-4">
        @for (nodePool of clusterSummary.nodePools; track $index) {
          <div
            class="rounded-md border border-gray-200 bg-gray-50 p-3 dark:border-gray-800 dark:bg-gray-900"
          >
            <h4 class="mb-3 text-sm font-medium dark:text-white">{{ nodePool.name }}</h4>
            <div class="grid grid-cols-1 gap-3 sm:grid-cols-3">
              <dl>
                <dt class="text-xs font-medium text-gray-500 dark:text-gray-400">Machine type</dt>
                <dd class="mt-1 text-sm dark:text-white">{{ nodePool.machineType }}</dd>
              </dl>
              <dl>
                <dt class="text-xs font-medium text-gray-500 dark:text-gray-400">
                  Min autoscaling
                </dt>
                <dd class="mt-1 text-sm dark:text-white">{{ nodePool.autoscaleMin }} nodes</dd>
              </dl>
              <dl>
                <dt class="text-xs font-medium text-gray-500 dark:text-gray-400">
                  Max autoscaling
                </dt>
                <dd class="mt-1 text-sm dark:text-white">{{ nodePool.autoscaleMax }} nodes</dd>
              </dl>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Plugins Block -->
    <div class="rounded-md border border-gray-200 p-4 dark:border-gray-800">
      <h3 class="mb-4 text-lg font-medium dark:text-white">Plugins</h3>
      <div class="space-y-2">
        <dl>
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Preset</dt>
          <dd class="mt-1 text-sm dark:text-white">{{ clusterSummary.plugins.preset }}</dd>
        </dl>
        <dl>
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Description</dt>
          <dd class="mt-1 text-sm dark:text-white">{{ clusterSummary.plugins.description }}</dd>
        </dl>
      </div>
    </div>

    <!-- Projects Block -->
    <div class="rounded-md border border-gray-200 p-4 dark:border-gray-800">
      <h3 class="mb-4 text-lg font-medium dark:text-white">Projects</h3>
      <div class="grid gap-4 sm:grid-cols-2">
        @for (project of clusterSummary.projects; track $index) {
          <div
            class="rounded-md border border-gray-200 bg-gray-50 p-3 dark:border-gray-800 dark:bg-gray-900"
          >
            <h4 class="mb-3 text-sm font-medium dark:text-white">{{ project.name }}</h4>
            <dl>
              <dt class="mb-1 text-xs font-medium text-gray-500 dark:text-gray-400">Namespaces</dt>
              <dd class="flex flex-wrap gap-1 text-sm">
                @for (namespace of project.namespaces; track namespace) {
                  <span
                    class="inline-flex items-center rounded-md bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800 dark:bg-blue-950 dark:text-blue-200"
                  >
                    {{ namespace }}
                  </span>
                }
              </dd>
            </dl>
          </div>
        }
      </div>
    </div>

    <!-- Creation Notice -->
    <div
      class="rounded-md border border-blue-200 bg-blue-50 p-4 dark:border-indigo-800 dark:bg-indigo-950"
    >
      <div class="mb-2 flex">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="mr-2 h-5 w-5 shrink-0 text-blue-400 dark:text-indigo-400"
          viewBox="0 0 24 24"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0m9-3h.01" />
            <path d="M11 12h1v4h1" />
          </g>
        </svg>
        <h3 class="text-sm font-medium text-blue-800 dark:text-indigo-300">Cluster creation</h3>
      </div>
      <div class="text-sm text-blue-700 dark:text-indigo-200">
        <p>
          Creating your cluster will take approximately 1-5 minutes. Keep this page open to view the
          progress.
        </p>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="flex space-x-3 border-t border-gray-200 pt-6 dark:border-gray-800">
      <a routerLink="/add-cluster-plugins" class="btn-secondary">Previous step</a>
      <button type="button" (click)="onCreateCluster()" class="btn-primary">Create cluster</button>
    </div>
  </div>
</div>
